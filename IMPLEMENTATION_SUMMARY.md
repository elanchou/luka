# Master Password åŠ å¯†åŠŸèƒ½å®ç°æ€»ç»“

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. æ ¸å¿ƒåŠ å¯†æœåŠ¡

**MasterKeyService** (`lib/services/master_key_service.dart`)
- âœ… PBKDF2-HMAC-SHA256 å¯†é’¥æ´¾ç”Ÿ
- âœ… éšæœº salt ç”Ÿæˆå’Œå­˜å‚¨
- âœ… ä¸‰ç§å®‰å…¨çº§åˆ« (Standard/Enhanced/Paranoid)
- âœ… å¯†ç éªŒè¯
- âœ… ä¿®æ”¹å¯†ç åŠŸèƒ½
- âœ… æ›´æ–°å®‰å…¨çº§åˆ«

**EncryptionService** (`lib/services/encryption_service.dart`)
- âœ… æ”¯æŒ master password åˆå§‹åŒ–
- âœ… AES-256-CBC åŠ å¯†/è§£å¯†
- âœ… å…¼å®¹æ—§çš„éšæœºå¯†é’¥ç³»ç»Ÿ
- âœ… è¿ç§»åˆ° password-based åŠ å¯†

**VaultService** (`lib/services/vault_service.dart`)
- âœ… æ¥å— master password å‚æ•°
- âœ… åŠ å¯†å­˜å‚¨ vault æ•°æ®
- âœ… è§£å¯†åŠ è½½ vault æ•°æ®

### 2. ç”¨æˆ·ç•Œé¢

**æ¬¢è¿é¡µ** (`vault_onboarding_screen.dart`)
- âœ… ä»‹ç» master password åŠ å¯†
- âœ… åˆ›å»ºæ–° vault æŒ‰é’® â†’ è®¾ç½®å¯†ç 

**è®¾ç½®å¯†ç ** (`set_master_password_screen.dart`)
- âœ… é¦–æ¬¡è®¾ç½®å¯†ç 
- âœ… å¯†ç ç¡®è®¤
- âœ… å®‰å…¨çº§åˆ«é€‰æ‹©
- âœ… æ˜¾ç¤º/éšè—å¯†ç 
- âœ… å¯†ç å¼ºåº¦éªŒè¯
- âœ… è¿­ä»£æ¬¡æ•°æ˜¾ç¤º

**è¾“å…¥å¯†ç è§£é”** (`master_password_input_screen.dart`)
- âœ… è¾“å…¥å¯†ç è§£é” vault
- âœ… å¯†ç éªŒè¯
- âœ… é”™è¯¯æç¤º
- âœ… å¿˜è®°å¯†ç é€‰é¡¹ (é‡ç½® vault)
- âœ… æ˜¾ç¤º/éšè—å¯†ç 

**ä¿®æ”¹å¯†ç ** (`change_master_password_screen.dart`)
- âœ… ç‹¬ç«‹çš„ä¿®æ”¹å¯†ç é¡µé¢
- âœ… éªŒè¯å½“å‰å¯†ç 
- âœ… è¾“å…¥æ–°å¯†ç 
- âœ… é€‰æ‹©å®‰å…¨çº§åˆ«
- âœ… é‡æ–°åŠ å¯†æ‰€æœ‰æ•°æ®

**è®¾ç½®é¡µ** (`system_settings_screen.dart`)
- âœ… æ˜¾ç¤ºå½“å‰å®‰å…¨çº§åˆ«
- âœ… "Change Master Password" å…¥å£
- âœ… å®‰å…¨çº§åˆ«ä¿¡æ¯å±•ç¤º
- âœ… ç®€åŒ–çš„ç•Œé¢ (ç§»é™¤å¤æ‚åµŒå¥—)

### 3. å¯åŠ¨æµç¨‹

**SplashScreen** (`app_splash_screen.dart`)
- âœ… æ£€æŸ¥ master password çŠ¶æ€
- âœ… æ£€æŸ¥ vault å­˜åœ¨æ€§
- âœ… æ™ºèƒ½è·¯ç”±:
  - æ— å¯†ç  + æ— vault â†’ Onboarding
  - æœ‰å¯†ç  + æœ‰vault â†’ Password Input
  - å¼‚å¸¸çŠ¶æ€ â†’ Onboarding

### 4. çŠ¶æ€ç®¡ç†

**VaultProvider** (`vault_provider.dart`)
- âœ… æ¥å— masterPassword å‚æ•°åˆå§‹åŒ–
- âœ… `reinitialize()` æ–¹æ³•é‡æ–°åˆå§‹åŒ–
- âœ… ç®¡ç†åŠ å¯†çŠ¶æ€

### 5. æ•°æ®æ¨¡å‹

**SecuritySettings** (`models/security_settings.dart`)
- âœ… SecurityLevel æšä¸¾
- âœ… å®‰å…¨çº§åˆ«é…ç½®
- âœ… AutoLockDuration æšä¸¾

## ğŸ“‹ ç”¨æˆ·æµç¨‹

### æ–°ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨
```
å¯åŠ¨ â†’ Splash â†’ Onboarding â†’ Set Password â†’ Input Password â†’ Dashboard
```

### è€ç”¨æˆ·è§£é”
```
å¯åŠ¨ â†’ Splash â†’ Input Password â†’ Dashboard
```

### ä¿®æ”¹å¯†ç 
```
Dashboard â†’ Settings â†’ Change Password â†’ è¾“å…¥æ—§å¯†ç  â†’ è®¾ç½®æ–°å¯†ç  â†’ å®Œæˆ
```

### å¿˜è®°å¯†ç 
```
Password Input â†’ Forgot Password â†’ è­¦å‘Šå¯¹è¯æ¡† â†’ ç¡®è®¤é‡ç½® â†’ Onboarding
```

## ğŸ” å®‰å…¨ç‰¹æ€§

### å¯†é’¥æ´¾ç”Ÿ
- **ç®—æ³•**: PBKDF2-HMAC-SHA256
- **Salt**: 256-bit éšæœºç”Ÿæˆ
- **Key Length**: 256-bit (32 bytes)
- **Iterations**: 100,000 - 1,000,000

### åŠ å¯†
- **ç®—æ³•**: AES-256-CBC
- **IV**: 128-bit éšæœºç”Ÿæˆ (æ¯æ¬¡åŠ å¯†ä¸åŒ)
- **å­˜å‚¨æ ¼å¼**: Base64(IV + Ciphertext)

### å®‰å…¨çº§åˆ«
| çº§åˆ« | è¿­ä»£æ¬¡æ•° | è§£é”æ—¶é—´ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|----------|
| Standard | 100,000 | ~100-200ms | æ—¥å¸¸ä½¿ç”¨ |
| Enhanced | 650,000 | ~500-700ms | æ•æ„Ÿæ•°æ® |
| Paranoid | 1,000,000 | ~1-1.5s | æœ€é«˜å®‰å…¨æ€§ |

## ğŸ“¦ ä¾èµ–é¡¹

```yaml
dependencies:
  crypto: ^3.0.3          # PBKDF2 å’Œ HMAC
  encrypt: ^5.0.3         # AES åŠ å¯†
  flutter_secure_storage: ^10.0.0  # å®‰å…¨å­˜å‚¨
```

## ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„

```
lib/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ master_key_service.dart      âœ… æ–°å¢
â”‚   â”œâ”€â”€ encryption_service.dart      âœ… æ›´æ–°
â”‚   â””â”€â”€ vault_service.dart           âœ… æ›´æ–°
â”œâ”€â”€ models/
â”‚   â””â”€â”€ security_settings.dart       âœ… æ–°å¢
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ app_splash_screen.dart       âœ… æ›´æ–°
â”‚   â”œâ”€â”€ vault_onboarding_screen.dart âœ… æ›´æ–°
â”‚   â”œâ”€â”€ set_master_password_screen.dart âœ… æ–°å¢
â”‚   â”œâ”€â”€ master_password_input_screen.dart âœ… æ–°å¢
â”‚   â”œâ”€â”€ change_master_password_screen.dart âœ… æ–°å¢
â”‚   â””â”€â”€ system_settings_screen.dart  âœ… æ›´æ–°
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ vault_provider.dart          âœ… æ›´æ–°
â””â”€â”€ main.dart                        âœ… æ›´æ–°
```

## âœ¨ UX æ”¹è¿›

### å¯†ç è¾“å…¥ä½“éªŒ
- âœ… æ˜¾ç¤º/éšè—å¯†ç åˆ‡æ¢
- âœ… å®æ—¶é”™è¯¯æç¤º
- âœ… åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âœ… å¯†ç ç¡®è®¤

### å®‰å…¨çº§åˆ«é€‰æ‹©
- âœ… å¯è§†åŒ–é€‰é¡¹å¡
- âœ… è¿­ä»£æ¬¡æ•°æ ¼å¼åŒ–æ˜¾ç¤º
- âœ… æ€§èƒ½æç¤º
- âœ… å®‰å…¨æ€§è¯´æ˜

### é”™è¯¯å¤„ç†
- âœ… å¯†ç ä¸ºç©ºæç¤º
- âœ… å¯†ç ä¸åŒ¹é…æç¤º
- âœ… å¯†ç é”™è¯¯æç¤º
- âœ… å¿˜è®°å¯†ç è­¦å‘Š

## ğŸ”„ å‘åå…¼å®¹

- âœ… æ£€æµ‹æ—§çš„éšæœºå¯†é’¥ç³»ç»Ÿ
- âœ… æä¾›è¿ç§»è·¯å¾„ (å¯é€‰)
- âœ… æ–°ç”¨æˆ·ç›´æ¥ä½¿ç”¨ password-based

## ğŸ“ å¾…ä¼˜åŒ–åŠŸèƒ½

### æœªæ¥å¢å¼º
- [ ] å¯†ç å¼ºåº¦æŒ‡ç¤ºå™¨
- [ ] ç”Ÿç‰©è¯†åˆ«å¿«é€Ÿè§£é” (ä½œä¸ºè¾…åŠ©)
- [ ] å¯†ç æç¤º (åŠ å¯†å­˜å‚¨)
- [ ] ç´§æ€¥è®¿é—®ç 
- [ ] å¯†ç é”™è¯¯æ¬¡æ•°é™åˆ¶
- [ ] å¯¼å‡ºå‰éœ€è¦å¯†ç ç¡®è®¤

### æ€§èƒ½ä¼˜åŒ–
- [ ] å¯†é’¥ç¼“å­˜ (ä¼šè¯æœŸé—´)
- [ ] åå°å¯†é’¥æ´¾ç”Ÿ
- [ ] è¿›åº¦æŒ‡ç¤ºå™¨ (é«˜å®‰å…¨çº§åˆ«)

## ğŸ§ª æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1. é¦–æ¬¡è®¾ç½®å¯†ç æµç¨‹
2. å¯†ç è§£é”æµç¨‹
3. ä¿®æ”¹å¯†ç æµç¨‹
4. å¿˜è®°å¯†ç é‡ç½®æµç¨‹
5. ä¸åŒå®‰å…¨çº§åˆ«åˆ‡æ¢

### å®‰å…¨æµ‹è¯•
1. å¯†ç éªŒè¯æ­£ç¡®æ€§
2. åŠ å¯†/è§£å¯†ä¸€è‡´æ€§
3. Salt éšæœºæ€§
4. å¯†é’¥æ´¾ç”Ÿæ€§èƒ½

### è¾¹ç•Œæµ‹è¯•
1. ç©ºå¯†ç å¤„ç†
2. è¶…é•¿å¯†ç å¤„ç†
3. ç‰¹æ®Šå­—ç¬¦å¯†ç 
4. ç½‘ç»œä¸­æ–­å¤„ç†
5. å­˜å‚¨å¤±è´¥å¤„ç†

## ğŸ“– æ–‡æ¡£

å·²åˆ›å»ºæ–‡æ¡£:
- âœ… `MASTER_PASSWORD_FEATURE.md` - è¯¦ç»†åŠŸèƒ½è¯´æ˜
- âœ… `USER_FLOW.md` - ç”¨æˆ·æµç¨‹å›¾
- âœ… `IMPLEMENTATION_SUMMARY.md` - æœ¬æ–‡ä»¶

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### ç›¸æ¯”ä¹‹å‰çš„å®ç°
1. **ä¸“ç”¨é¡µé¢**: ç‹¬ç«‹çš„ change password é¡µé¢,ä¸åœ¨ settings å†…åµŒå¥—
2. **æ¸…æ™°æµç¨‹**: ä» onboarding å¼€å§‹å°±è¦æ±‚è®¾ç½®å¯†ç 
3. **ç»Ÿä¸€ä½“éªŒ**: æ‰€æœ‰å¯†ç è¾“å…¥ä½¿ç”¨ä¸€è‡´çš„ UI ç»„ä»¶
4. **æ™ºèƒ½è·¯ç”±**: Splash screen æ™ºèƒ½åˆ¤æ–­ç”¨æˆ·çŠ¶æ€
5. **ç®€åŒ– settings**: Settings é¡µé¢åªåšå±•ç¤ºå’Œå¯¼èˆªå…¥å£

## âœ… éªŒæ”¶æ ‡å‡†

- âœ… æ–°ç”¨æˆ·å¿…é¡»è®¾ç½® master password
- âœ… å¯†ç éªŒè¯å¿…é¡»é€šè¿‡æ‰èƒ½è§£é”
- âœ… ä¿®æ”¹å¯†ç éœ€è¦éªŒè¯æ—§å¯†ç 
- âœ… æ‰€æœ‰æ•°æ®ä½¿ç”¨ master password æ´¾ç”Ÿçš„å¯†é’¥åŠ å¯†
- âœ… å®‰å…¨çº§åˆ«å¯é…ç½®
- âœ… å¿˜è®°å¯†ç å¯é‡ç½® vault (ä¸¢å¤±æ•°æ®)
- âœ… UI æµç•…,æ— å¡é¡¿
- âœ… é”™è¯¯æç¤ºæ¸…æ™°

